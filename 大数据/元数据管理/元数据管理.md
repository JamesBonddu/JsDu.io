# 元数据工具

https://solutionsreview.com/data-management/the-best-metadata-management-tools/

https://zhuanlan.zhihu.com/p/338658341

https://segmentfault.com/a/1190000022563622


https://github.com/WeBankFinTech/WeBank-all-Project

# sql flow
https://www.gudusoft.com/sql-data-lineage-tool/?utm_source=db-engines&utm_medium=banner-Snowflake

# datahub

https://github.com/linkedin/datahub

https://www.cnblogs.com/tree1123/p/15743253.html

https://developer.aliyun.com/article/792605


该模块为 DataHub 托管一个可扩展的基于 Python 的元数据摄取系统。这支持使用 Kafka 或通过 REST API 将数据发送到 DataHub。它可以通过我们的 CLI 工具、Airflow 等编排器或作为库使用。

https://datahubproject.io/docs/quickstart/


# 技术调研

https://zhuanlan.zhihu.com/p/438112797

https://juejin.cn/post/6893650753765212168

# Atlas 元数据管理

https://mp.weixin.qq.com/s/ADJwiGmfsYpXv9PmnM5HDg

# lyft amundsen

https://github.com/amundsen-io/amundsen


https://mp.weixin.qq.com/s/pRuBaj0vutFL5YitA7JTZQ

# 微众

https://blog.csdn.net/weixin_29607417/article/details/112763710

# 元数据管理

血缘分析的作用：

问题定位：假设你用到了别人的数据，数据血缘分析能快速帮你定位到问题。
理解数据：如果你想用其它的数据源，首先要能理解它，不然数据口径能给你带来很大的麻烦。
影响评估：修改某份数据的时候能评估影响的范围大小。比如说现在你的小伙伴要调整自己开发的 Table J，这时候如果他不知道有谁在依赖这张表，冒然修改的话会带来毁灭性的伤害，但是有数据血缘分析的时候，至少能知道谁在使用这份数据。
数据血缘分析是元数据管理的重要应用之一，梳理系统、表、视图、存储过程、ETL、程序代码、字段等之间的关系，并采用图数据库进行可视化展现。总之就是通过可视化展示数据是怎么来的，经过了哪些过程、阶段及计算逻辑。

https://blog.51cto.com/u_13270164/3022129

https://segmentfault.com/a/1190000040687986

https://blog.css8.cn/post/11875835.html

https://pdf.hanspub.org/HJDM20180300000_32589789.pdf

# 元数据产品

小米元数据平台的技术架构如图3所示，整体架构与Apache的Atlas非常相似。

整体上可以划分为三层。最上层是数据采集的源头，以及最终数据支撑的应用，包括Metadata Source、Lineage Source、Log Source和应用Application。中间层是集成层，集成层是由Metacat、MQ以及API层组成。最底层是核心的存储层。

最上层的Metadata Source用于对表元数据采集。最早只限于Hive表，后来实现了全域元数据的采集。主要包括ETL整个生产链路及上下游的全链路。比如：元数据采自于业务的Mysql数据库。其中消息队列采用了小米自研的Talos，简单说实现了数据集成与分发的总线。而下游元数据的采集由Hive、Doris、ES、Kudu等实现。

元数据平台进化过程中，关键的演化点之一是全域元数据。之前提到元数据都是基于Hive进行管理，显然只能看到Hive层的数据，无法知道产生的Hive表，到下游后最终有没有被使用。举例来说，有一堆数据给上层应用，用于看板或者指标，产生了一张Doris表；但对应的看板可能并没有人看，所以可以通过倒推，把链路中的这一条链路进行优化或者治理。而实现这样的场景，就需要打通全链路，包括看板信息，搜索等，都需要全域元数据进行支撑。此时就需要进行域拓展。以Hive为中心去看上下游，包括上游的业务数据库、Messaging，下游的Doris、Kudu、ES，包括内部重构传统Hive 数仓的Iceberg，都要采集元数据。在实现全域的过程中，同时打开统一元数据的Hive Metastore，实现统一的表数据视角和管理。请参见图4。

https://mp.weixin.qq.com/s/e4SDx7I-D1iCDf-Hn6sBbg





# 全链路数据血缘在满帮的实践

## 血缘解析
当前，数据血缘大多是对SQL语句进行解析，以发现上下游调用栈等信息。主流方案可分为两种：

运行时解析，即在任务运行时通过hook接口或者listener接口对SQL生成的逻辑技术树（AST）进行解析。
先采集后解析，即通过采集程序把各个计算引擎的SQL统一采集到mq进行血缘解析。
上述两类方案各有优劣，其对比如表1所示。

表1 数据血缘解析方案
相比传统关系型数据库和ES等工具，图数据库在血缘信息的查询与分析方面具有如下优势：

1、对复杂关系的存储和分析更优

数据血缘刻画了数据的完整生命周期，具有数据链路长的特点。传统关系型数据库和ES等，往往只能反映当前状态或较短路径内的状态，在长链路血缘的检索中存在明显劣势。而图数据库进行了复杂关系的有效组织，通过点边结构将血缘的上下游进行了完美串联，进而可实现更长链路血缘的存储、检索和分析。

2、能够有效利用数据间的关联性达成更精准可靠的决策

图结构特征对业务具有重要的指导意义。例如，图的稠密程度可反映业务数据关联的紧密程度，进而有助于识别高I/O或高吞吐量业务，识别链路瓶颈；图数据间的共现性可反映出血缘中的共生关系，进行辅助进行血缘重要性划分；图可视化有助于帮助业务人员更清晰的了解血缘动态等。

相比开源图数据库Neo4j、Nebula Graph，华为云GES具有如下优势：

基于分布式内存计算，性能更高，速度更快，响应时间更短
集成30+高性能算法，图分析能力更强
对接华为云大数据、AI服务，周边支持更全面，服务对接更便利
基于实践自研了查询算子Path-Query，支持复杂过滤查询条件，且具备更优的查询性能
华为云GES的基准测试数据如表2所示。

https://developer.huawei.com/consumer/cn/forum/topic/0202745136391550446?fid=0101592429757310384


https://mp.weixin.qq.com/s/RnCGzeAYMZyUrCWm0rFGTw

https://mp.weixin.qq.com/s/u4DobVcV7MgLPZMIMbYkDg

https://mp.weixin.qq.com/s/z63cIwpW2Plx_VnztutTpw

https://mp.weixin.qq.com/s/B2NoK101kkiDLPDaSrw2Og


https://mp.weixin.qq.com/s/vEz3bn3Z-m-I74Cbf3U_nw


了解了什么是数据的血缘，下面我们将更深一步地了解该如何去梳理数据血缘。
梳理数据血缘的方法主要可以归为三类：
1. 自动解析：通过解析数据加工流转中的SQL语句、存储过程、ETL过程等，举个简单的例子

Insert into DB.targetTable
Select column1, column2
From DB.sourcetable1,DB.sourcetable2
Where …
程序自动解析这段sql语句，通过from、into等关键字，判断出targetTable是由sourcetable1和sourcetable2生成而来的，同样column1和column2又是从哪几个字段运算得出的。
2. 系统跟踪：这种方法是根据一定规则，在数据加工流转过程中直接由加工主体完成血缘关系的映射，这种方法效率最高，但是开发难度也较高。

3. 手工梳理：是指技术人员手工对血缘关系进行梳理，效率比较低而且难度比较高。但却也是血缘分析中必不可少的一种方法。


当然，对于现在成熟的企业来说，光系统就动辄几十，上百个，靠纯手工梳理如同愚公移山，不现实。因此血缘关系的自动解析就显得尤为重要。现在已有很多成熟的方案，这里简单介绍几个开源工具：

1. druid：druid是阿里开源的数据库连接池，其提供了一个简单的、易用的SQL解析工具，但是缺点是对hive sql的支持不够好。
2. Wherehows：是由LinkedIn开源的元数据治理方案，由Azkaban调度器抓取job执行日志，解析血缘，但是其只支持表血缘，功能局限。
3. Atlas：是Apache开源的元数据治理方案，使用HiveHook等采集数据，存入Titan图数据库，同样支持表血缘，对列级支持不完善。



词根是企业最细粒度业务术语，是维度和指标管理的基础，通过词根可以用来统一表名、字段名、主题域名；建立和维护可收敛的词根库，业务域、主题域我们都可以用词根的方式枚举清楚，不断完善，粒度也是同样的，主要的是时间粒度、日、月、年、周等，使用词根定义好简称，数仓开发的字段命名也可以使用词根进行组合；划分为普通词根与专有词根

普通词根：描述事物的最小单元体，如：交易-trade。
专有词根：具备约定成俗或行业专属的描述体，如：美元-USD。


https://mp.weixin.qq.com/s/4mk47XnV_d1Zo0nvBVHpAw
